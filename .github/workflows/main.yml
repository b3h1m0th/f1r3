name: Run Chromium Docker Container

on:
  workflow_dispatch:

jobs:
  run-chromium:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Docker
        uses: docker/setup-buildx-action@v3

      - name: Run Chromium container
        run: |
          docker run -d \
            --name=chromium \
            --security-opt seccomp=unconfined \
            -e PUID=1000 \
            -e PGID=1000 \
            -e TZ=Etc/UTC \
            -e CHROME_CLI=https://www.linuxserver.io/ \
            -p 3000:3000 \
            -p 3001:3001 \
            -v /path/to/chromium/config:/config \
            --shm-size="1gb" \
            --restart unless-stopped \
            lscr.io/linuxserver/chromium:latest

      - name: Keep alive for 5 hours
        run: sleep 18000

      - name: Show running containers
        run: docker ps
